<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>~/temp/presentations/tcl/tcl.otl.html</title>
<meta name="Generator" content="Vim/7.4">
<meta name="plugin-version" content="vim7.4_v1">
<meta name="syntax" content="none">
<meta name="settings" content="use_css,pre_wrap,no_foldcolumn,expand_tabs,prevent_copy=">
<meta name="colorscheme" content="zellner">
<style type="text/css">
<!--
pre { white-space: pre-wrap; font-family: monospace; color: #000000; background-color: #ffffff; }
body { font-family: monospace; color: #000000; background-color: #ffffff; }
* { font-size: 1em; }
.Tab { background-color: #e0ffe0; padding-bottom: 1px; }
.Tab2 { background-color: #ffe0e0; padding-bottom: 1px; }
.otlTagDef { background-color: #90ee90; padding-bottom: 1px; }
.otlTagRef { background-color: #ffbbbb; padding-bottom: 1px; }
.otlTextLeader { color: #a9a9a9; }
.OtlTab0 { color: #00a000; }
.OtlTab1 { color: #a00000; }
.OtlTab2 { color: #0000a0; }
.OtlTab3 { color: #0080a0; }
.otlTab4 { color: #8b008b; }
-->
</style>

<script type='text/javascript'>
<!--

-->
</script>
</head>
<body>
<pre id='vimCodeElement'>
<span class="OtlTab0">===================== Obsah kurzu =============================</span>

<span class="OtlTab1">    1. Ošetření chyb ve skriptech</span>
<span class="OtlTab1">    2. Smyčka událostí</span>
<span class="OtlTab1">    3. Dynamická tvorba kódu</span>
<span class="OtlTab1">    4. Oblast platnosti proměnných</span>
<span class="OtlTab1">    5. Regulární výrazy</span>
<span class="OtlTab1">    6. Práce se sockety</span>
<span class="OtlTab1">    7. Informace poskytované VM TCL</span>
<span class="OtlTab1">    8. Trasování proměnných</span>
<span class="OtlTab1">    9. Trasování programu</span>
<span class="OtlTab1">    10. Vytváření procesů</span>
<span class="OtlTab1">    11. Multithreading</span>
<span class="OtlTab1">    12. Jmenné prostory</span>
<span class="OtlTab1">    13. Objektové rozšíření incr Tcl</span>
<span class="OtlTab1">    14. Knihovna Tcllib</span>
<span class="OtlTab1">    15. Komunikační protokoly</span>
<span class="OtlTab1">    16. Matematické funkce a operace</span>



<span class="OtlTab0">_______________________________________________________________</span>










<span class="OtlTab0">===================== 1. Ošetření chyb ========================</span>

<span class="OtlTab0">Ošetření chyb</span>
<span class="OtlTab1">    * Příkaz &quot;error msg&quot;</span>
<span class="OtlTab1">    * Příkaz &quot;catch script&quot;</span>
<span class="OtlTab1">    * Příkaz &quot;catch script proměnná&quot;</span>

<span class="OtlTab0">Příkaz &quot;error msg&quot;</span>
<span class="OtlTab1">    * Vypíše zprávu na standardní výstup</span>
<span class="OtlTab1">    * Ukončí běh procedury (pokud je použit v proceduře)</span>
<span class="OtlTab1">    * Lze odchytit pomocí příkazu &quot;catch&quot;</span>
<span class="OtlTab1">    * Demonstrační příklad</span>
<span class="OtlTab2">        - procedura pro výpočet podílu</span>
<span class="OtlTab2">        - pokud by mělo dojít k dělení nulou, vypíše se chyba</span>

<span class="OtlTab3">            proc div {a b} {</span>
<span class="OtlTab3">                if {$b==0} {</span>
<span class="OtlTab3">                    error &quot;divide by zero&quot;</span>
<span class="OtlTab3">                } else {</span>
<span class="OtlTab3">                    return </span><span class="otlTagRef">[expr $a/$b]</span>
<span class="OtlTab3">               }</span>
<span class="OtlTab3">            }</span>
<span class="OtlTab3">            % div 4 2</span>
<span class="OtlTab3">            2</span>
<span class="OtlTab3">            % div 4 0</span>
<span class="OtlTab3">            divide by zero</span>

<span class="OtlTab0">Příkaz &quot;catch script&quot;</span>
<span class="OtlTab1">    * Spoustí skript předaný v prvním argumentu příkazu</span>
<span class="OtlTab1">    * Zachycuje všechny výjimečné stavy</span>
<span class="OtlTab1">    * Vrací 0 v případě, že je vše ok</span>
<span class="OtlTab2">        - TCL_OK = 0</span>
<span class="OtlTab1">    * Vrací jinou hodnotu v případě chyby</span>
<span class="OtlTab2">        - TCL_ERROR = 1</span>
<span class="OtlTab2">        - TCL_RETURN = 2</span>
<span class="OtlTab2">        - TCL_BREAK = 3</span>
<span class="OtlTab2">        - TCL_CONTINUE = 4</span>
<span class="OtlTab1">    * Demonstrační příklad</span>
<span class="OtlTab2">        - využití dříve definované procedury &quot;div&quot;</span>
<span class="OtlTab3">            % catch {div 4 2}</span>
<span class="OtlTab3">            0</span>
<span class="OtlTab3">            % catch {div 4 0}</span>
<span class="OtlTab3">            1</span>
<span class="OtlTab3">            % catch {set result </span><span class="otlTagRef">[div 4 2]</span><span class="OtlTab3">}</span>
<span class="OtlTab3">            0</span>
<span class="OtlTab3">            % puts $result</span>
<span class="OtlTab3">            2</span>
<span class="OtlTab3">            % catch {set result </span><span class="otlTagRef">[div 4 0]</span><span class="OtlTab3">}</span>
<span class="OtlTab3">            1</span>
<span class="OtlTab3">            % puts $result</span>
<span class="OtlTab3">            2 // původní hodnota!</span>

<span class="OtlTab0">Příkaz &quot;catch script proměnná&quot;</span>
<span class="OtlTab1">    * Podobná funkcionalita, jako v případě &quot;catch script&quot;</span>
<span class="OtlTab1">    * Proměnná se nastaví na chybovou hodnotu</span>
<span class="OtlTab1">    * Zjednoduší se některé programové konstrukce</span>
<span class="OtlTab1">    * Demonstrační příklad</span>
<span class="OtlTab2">        - otevře soubor pro zápis s testem, zda je vše ok</span>
<span class="OtlTab3">            if { </span><span class="otlTagRef">[catch {open $fileName w} fid]</span><span class="OtlTab3"> } {</span>
<span class="OtlTab3">                puts stderr &quot;Could not open $fileName for writing\n$fid&quot;</span>
<span class="OtlTab3">                exit 1</span>
<span class="OtlTab3">            }</span>
<span class="OtlTab0">_______________________________________________________________</span>










<span class="OtlTab0">=================== 2. Smyčka událostí   ======================</span>

<span class="OtlTab0">Smyčka událostí</span>
<span class="OtlTab1">    * Event loop</span>
<span class="OtlTab1">    * Interní programová smyčka spravovaná VM TCL</span>
<span class="OtlTab1">    * Používána pro</span>
<span class="OtlTab2">        - Interně použita v knihovně Tk</span>
<span class="OtlTab2">        - Tvorbu GUI (implicitně při použití &quot;wish&quot; apod.)</span>
<span class="OtlTab2">        - Práci se sockety</span>
<span class="OtlTab2">        - Práci s časovači (timery)</span>
<span class="OtlTab1">    * Později si ukážeme práci se sockety</span>

<span class="OtlTab0">Vstup do smyčky událostí</span>
<span class="OtlTab1">    * vwait proměnná</span>
<span class="OtlTab2">        - Interně testuje hodnotu proměnné</span>
<span class="OtlTab2">        - Pokud je proměnná změněna, smyčka se ukončí</span>
<span class="OtlTab3">            - mnohem lepší, než se snažit o použití return či exit</span>
<span class="OtlTab3">              což ne vždy funguje</span>
<span class="OtlTab2">        - Musí se jednat o globální proměnnou</span>
<span class="OtlTab0">_______________________________________________________________</span>










<span class="OtlTab0">=================== 3. Dynamická tvorba kódu ==================</span>

<span class="OtlTab0">Dynamická tvorba kódu</span>
<span class="OtlTab1">    * Tcl je v porovnání s podobnými jazyky velmi dynamický skriptovací jazyk</span>
<span class="OtlTab2">        - většina příkazů se vyhodnocuje až při běhu programu</span>
<span class="OtlTab2">        - neprovádí se mezipřeklad</span>
<span class="OtlTab2">        - příkazy i jejich parametry jsou chápány jako řetězce</span>
<span class="OtlTab2">        - naproti tomu Perl, Python: překlad do mezikódu</span>
<span class="OtlTab3">            - i v těchto jazycích však existuje podpora pro eval()</span>
<span class="OtlTab1">    * základ dynamické tvorby kódu</span>
<span class="OtlTab2">        - příkaz je možné uložit do proměnné</span>
<span class="OtlTab2">        - následně je možné tuto proměnnou &quot;spustit&quot;</span>
<span class="OtlTab1">    * jednoduchý příklad</span>
<span class="OtlTab2">        - uložení příkazu do proměnné &quot;a&quot;</span>

<span class="OtlTab3">            % set a llength</span>
<span class="OtlTab3">            llength</span>
<span class="OtlTab3">            % $a {1 2 3}</span>
<span class="OtlTab3">            3</span>

<span class="OtlTab2">        - uložení příkazu do dvojice proměnných &quot;a&quot; a &quot;b&quot;</span>

<span class="OtlTab3">            % set a lle</span>
<span class="OtlTab3">            lle</span>
<span class="OtlTab3">            % set b ngth</span>
<span class="OtlTab3">            ngth</span>
<span class="OtlTab3">            % # dvojice promennych ve forme parametru</span>
<span class="OtlTab3">            % puts $a$b</span>
<span class="OtlTab3">            llength</span>
<span class="OtlTab3">            % # dvojice promennych ve forme prikazu</span>
<span class="OtlTab3">            % $a$b {1 2 3}</span>
<span class="OtlTab3">            3</span>

<span class="OtlTab1">    * při zápisu příkazů je možné využívat interpolaci (substituci)</span>
<span class="OtlTab1">    * a další příkazy vložené do </span><span class="otlTagRef">[]</span><span class="OtlTab1"> nebo naopak do {}</span>
<span class="OtlTab1">    * Tcl nejprve vyhodnotí vše uvnitř </span><span class="otlTagRef">[]</span><span class="OtlTab1"> a posléze výsledek považuje za příkaz</span>
<span class="OtlTab2">        - použití substituce </span><span class="otlTagRef">[]</span>

<span class="OtlTab3">            % </span><span class="otlTagRef">[string range &quot;Xllen&quot; 1 end]</span><span class="OtlTab3">gth {1 2 3}</span>
<span class="OtlTab3">            3</span>

<span class="OtlTab1">    * pro složitější konstrukce se používá příkaz eval</span>
<span class="OtlTab2">        - příklad použití příkazu eval</span>

<span class="OtlTab3">            % eval &quot;set foo 10&quot;</span>
<span class="OtlTab3">            10</span>

<span class="OtlTab3">            % # zavorky {} zabranuji vyhodnoceni</span>
<span class="OtlTab3">            % set myscript {puts $foo}</span>
<span class="OtlTab3">            puts $foo</span>

<span class="OtlTab3">            % eval $myscript</span>
<span class="OtlTab3">            10</span>

<span class="OtlTab1">    * eval pracuje následovně:</span>
<span class="OtlTab2">        - nejprve spojí své parametry do jediného seznamu</span>
<span class="OtlTab2">        - vyhodnocí parametr jako příkaz</span>
<span class="OtlTab2">        - vrátí výsledek tohoto příkazu</span>
<span class="OtlTab1">    * pozor na spojování parametrů do jediného seznamu</span>
<span class="OtlTab2">        - příklad s chybou</span>

<span class="OtlTab3">            % set a {puts &quot;Procedura a&quot;}</span>
<span class="OtlTab3">            puts &quot;Procedura a&quot;</span>

<span class="OtlTab3">            % set b {puts &quot;Procedura b&quot;}</span>
<span class="OtlTab3">            puts &quot;Procedura b&quot;</span>

<span class="OtlTab3">            % # vyhodnocení procedury A</span>
<span class="OtlTab3">            % eval $a</span>
<span class="OtlTab3">            Procedura a</span>

<span class="OtlTab3">            % # vyhodnocení procedury B</span>
<span class="OtlTab3">            % eval $b</span>
<span class="OtlTab3">            Procedura b</span>

<span class="OtlTab3">            % # zde ovšem dojde k chybě</span>
<span class="OtlTab3">            % eval $a $b</span>
<span class="OtlTab3">            bad argument &quot;Procedura b&quot;: should be &quot;nonewline&quot;</span>

<span class="OtlTab2">        - využití spojení parametrů do seznamu</span>

<span class="OtlTab3">            % set print {puts}</span>
<span class="OtlTab3">            puts</span>
<span class="OtlTab3">            % eval $print</span>
<span class="OtlTab3">            wrong # args: should be &quot;puts ?-nonewline? ?channelId? string&quot;</span>
<span class="OtlTab3">            % eval $print 10</span>
<span class="OtlTab3">            10</span>

<span class="OtlTab1">    * vytvoření nového typu programové smyčky</span>
<span class="OtlTab2">        - procedura s dvojicí parametrů: počtem opakování a skriptem</span>

<span class="OtlTab3">            proc repeat {count script} {</span>
<span class="OtlTab3">                while {</span><span class="otlTagRef">[incr count -1]</span><span class="OtlTab3"> &gt;= 0} {</span>
<span class="OtlTab3">                    eval $script</span>
<span class="OtlTab3">                }</span>
<span class="OtlTab3">            }</span>

<span class="OtlTab2">        - nyní proceduru vyzkoušíme</span>

<span class="OtlTab3">            % repeat 6 {puts Hello}</span>
<span class="OtlTab3">            Hello</span>
<span class="OtlTab3">            Hello</span>
<span class="OtlTab3">            Hello</span>
<span class="OtlTab3">            Hello</span>
<span class="OtlTab3">            Hello</span>
<span class="OtlTab3">            Hello</span>

<span class="OtlTab2">        - složitější příklad</span>

<span class="OtlTab3">            % repeat 6 {puts </span><span class="otlTagRef">[expr 1+2]</span><span class="OtlTab3">}</span>
<span class="OtlTab3">            3</span>
<span class="OtlTab3">            3</span>
<span class="OtlTab3">            3</span>
<span class="OtlTab3">            3</span>
<span class="OtlTab3">            3</span>
<span class="OtlTab3">            3</span>

<span class="OtlTab1">    * přístup k proměnným ze skriptů vyhodnocovaných pomocí eval</span>
<span class="OtlTab2">        - vytvoření globální proměnné</span>

<span class="OtlTab3">            % set x 10</span>
<span class="OtlTab3">            10</span>
<span class="OtlTab3">            % puts x 10</span>
<span class="OtlTab3">            10</span>

<span class="OtlTab2">        - globální proměnná je viditelná ze skriptu v eval</span>

<span class="OtlTab3">            % eval {puts $x}</span>
<span class="OtlTab3">            10</span>

<span class="OtlTab0">_______________________________________________________________</span>










<span class="OtlTab0">=================== 4. Oblast platnosti proměnných  ===========</span>

<span class="OtlTab0">Oblast platnosti proměnných</span>
<span class="OtlTab1">    * TCL vyhodnocuje oblast viditelnosti proměnných</span>
<span class="OtlTab2">        - vázané na proceduru</span>
<span class="OtlTab2">        - vázané na jmenný prostor</span>
<span class="OtlTab2">        - globální proměnné</span>

<span class="OtlTab1">    * Příkaz &quot;global&quot;</span>
<span class="OtlTab2">        - proměnná s lokální platností (v proceduře) bude</span>
<span class="OtlTab2">          odkazovat na globální proměnnou tohoto jména</span>

<span class="OtlTab1">    * Příkaz &quot;upvar&quot;</span>
<span class="OtlTab2">        - naváže jméno proměnné na proměnnou s jinou</span>
<span class="OtlTab2">          oblastí platnosti</span>
<span class="OtlTab2">        - upvar otherVar myVar</span>
<span class="OtlTab3">            - myVar bude referencí na otherVar</span>
<span class="OtlTab2">        - upvar otherVar1 myVar1 otherVar2 myVar2 ...</span>
<span class="OtlTab3">            - myVar1 bude referencí na otherVar1</span>
<span class="OtlTab3">            - myVar2 bude referencí na otherVar2</span>
<span class="otlTab4">                ...</span>
<span class="OtlTab3">            - myVarN bude referencí na otherVarN</span>
<span class="OtlTab2">        - upvar level otherVar myVar</span>
<span class="OtlTab3">            - dokáže odkazovat na proměnnou v rámci zásobníku volání</span>
<span class="OtlTab3">              (o N úrovní výše od současné pozice směrem nahoru)</span>
<span class="OtlTab2">        - upvar #level otherVar myVar</span>
<span class="OtlTab3">            - dokáže odkazovat na proměnnou v rámci zásobníku volání</span>
<span class="OtlTab3">              (o N úrovní níže od globální úrovně směrem dolů)</span>

<span class="OtlTab1">    * Využití příkazu &quot;info&quot; pro test na existenci proměnné</span>
<span class="OtlTab2">        - příkaz &quot;info exists proměnná&quot; vrací 1/0 podle toho</span>
<span class="OtlTab2">          zda proměnná existuje</span>
<span class="OtlTab3">            proc add {prom hodnota} {</span>
<span class="OtlTab3">                upvar $prom p</span>
<span class="OtlTab3">                if { </span><span class="otlTagRef">[info exists p]</span><span class="OtlTab3"> } {</span>
<span class="OtlTab3">                    incr p $hodnota</span>
<span class="OtlTab3">                } else {</span>
<span class="OtlTab3">                    set p $hodnota</span>
<span class="OtlTab3">                }</span>
<span class="OtlTab3">            }</span>
<span class="OtlTab0">_______________________________________________________________</span>










<span class="OtlTab0">=================== 5. Regulární výrazy     ===================</span>

<span class="OtlTab0">Regulární výrazy v TCL</span>
<span class="OtlTab1">    * Jedna z možností zpracování řetězců a získávání informací</span>
<span class="OtlTab1">      uložených v těchto řetězcích</span>
<span class="OtlTab1">    * Dva typy regulárních výrazů</span>
<span class="OtlTab2">        - glob matching (&quot;globbing&quot;)</span>
<span class="OtlTab2">        - &quot;skutečné&quot; regulární výrazy</span>
<span class="OtlTab1">    * Glob matching</span>
<span class="OtlTab2">        - odvozeno od zástupných znaků používaných v shellu (Bash...)</span>
<span class="OtlTab2">        - používán v TCL:</span>
<span class="OtlTab3">            - příkaz lsearch</span>
<span class="OtlTab3">            - příkaz string match</span>
<span class="OtlTab3">            - příkaz glob</span>
<span class="OtlTab2">        - kromě běžných znaků se používají speciální znaky:</span>
<span class="OtlTab3">            &quot;*&quot;   zastupuje sekvenci libovolných znaků</span>
<span class="OtlTab3">            &quot;?&quot;   zastupuje jeden libovolný znak</span>
<span class="OtlTab3">            &quot;</span><span class="otlTagRef">[]</span><span class="OtlTab3">&quot;  zastupuje libovolný znak v závorkách</span>
<span class="OtlTab3">            &quot;</span><span class="otlTagRef">[-]</span><span class="OtlTab3">&quot; zastupuje znak ze zadaného rozsahu, př. A-Z, 0-9</span>
<span class="OtlTab1">    * Demonstrační příklad</span>
<span class="OtlTab2">        - použití příkazu glob</span>
<span class="OtlTab3">            % glob t*</span>
<span class="OtlTab3">            tzdata_issue</span>
<span class="OtlTab3">            tomcat</span>
<span class="OtlTab3">            test-machines.odt</span>
<span class="OtlTab3">            temp</span>
<span class="OtlTab3">            tcl</span>

<span class="OtlTab3">            % set seznam </span><span class="otlTagRef">[glob t*]</span>
<span class="OtlTab3">            % foreach prvek $seznam {</span>
<span class="OtlTab3">                puts $prvek</span>
<span class="OtlTab3">            }</span>
<span class="OtlTab3">            tzdata_issue</span>
<span class="OtlTab3">            tomcat</span>
<span class="OtlTab3">            test-machines.odt</span>
<span class="OtlTab3">            temp</span>
<span class="OtlTab3">            tcl</span>

<span class="OtlTab1">    * Demonstrační příklad</span>
<span class="OtlTab2">        - použití příkazu string match</span>
<span class="OtlTab3">            % set x &quot;foo&quot;</span>
<span class="OtlTab3">            foo</span>
<span class="OtlTab3">            % string match f* $x</span>
<span class="OtlTab3">            1</span>
<span class="OtlTab3">            % string match f? $x</span>
<span class="OtlTab3">            0</span>
<span class="OtlTab3">            % string match f?? $x</span>
<span class="OtlTab3">            1</span>

<span class="OtlTab3">            # pozor na speciální význam </span><span class="otlTagRef">[]</span><span class="OtlTab3">!</span>
<span class="OtlTab3">            % string match </span><span class="otlTagRef">[a-z]</span><span class="OtlTab3">* $x</span>
<span class="OtlTab3">            invalid command name &quot;a-z&quot;</span>
<span class="OtlTab3">            % string match &quot;</span><span class="otlTagRef">[a-z]</span><span class="OtlTab3">*&quot; $x</span>
<span class="OtlTab3">            invalid command name &quot;a-z&quot;</span>
<span class="OtlTab3">            # toto už je lepší</span>
<span class="OtlTab3">            % string match {</span><span class="otlTagRef">[a-z]</span><span class="OtlTab3">*} $x</span>
<span class="OtlTab3">            1</span>

<span class="OtlTab1">    * &quot;Plnohodnotné&quot; regulární výrazy</span>
<span class="OtlTab2">        - příkaz regexp</span>
<span class="OtlTab2">        - znaky se speciálním významem</span>
<span class="OtlTab3">            - kvalifikátory</span>
<span class="OtlTab3">            - atomy</span>
<span class="OtlTab3">            - znaky pro začátek a konec řádku</span>
<span class="OtlTab3">            - výrazy v </span><span class="otlTagRef">[]</span>
<span class="OtlTab3">            - třídy znaků</span>
<span class="OtlTab3">            - speciální znaky</span>

<span class="OtlTab1">    * Součásti regulárních výrazů</span>
<span class="OtlTab2">        - kvalifikátory</span>
<span class="OtlTab3">            *     sekvence 0..n atomů</span>
<span class="OtlTab3">            +     sekvence 1..n atomů</span>
<span class="OtlTab3">            ?     žádný nebo jeden atom</span>
<span class="OtlTab3">            {m}   v závorce je zapsán přesný počet atomů</span>
<span class="OtlTab3">            {m,}  v závorce je zapsán minimální počet atomů</span>
<span class="OtlTab3">            {m,n} v závorce je minimální a maximální počet atomů</span>
<span class="OtlTab2">        - atomy</span>
<span class="OtlTab3">            x  konkrétní znak</span>
<span class="OtlTab3">            () prázdný řetězec</span>
<span class="OtlTab3">            .  jediný znak</span>
<span class="OtlTab3">            \X řídicí znak či znak se zadaným kódem</span>
<span class="OtlTab3">            (xxx) část výrazu, k níž lze později přistupovat (podle indexu)</span>
<span class="OtlTab2">        - znaky pro začátek a konec řádku</span>
<span class="OtlTab3">            ^ nahrazuje začátek řádku</span>
<span class="OtlTab3">            $ nahrazuje konec řádku</span>
<span class="OtlTab2">        - výrazy v </span><span class="otlTagRef">[]</span>
<span class="OtlTab3">            lze zde zapsat množinu znaků</span>
<span class="OtlTab3">            při rozdělení znaků pomocí - se určuje rozsah a-z, 5-7 atd.</span>
<span class="OtlTab3">            ^ negace - všechny znaky, které NEodpovídají dalšímu výrazu</span>
<span class="OtlTab2">        - třídy znaků</span>
<span class="OtlTab3">            vnější závorky </span><span class="otlTagRef">[]</span><span class="OtlTab3"> změní třídu znaků na množinu</span>
<span class="OtlTab3">            </span><span class="otlTagDef">[[:alpha:]]</span><span class="OtlTab3">  písmeno</span>
<span class="OtlTab3">            </span><span class="otlTagDef">[[:upper:]]</span><span class="OtlTab3">  velké písmeno</span>
<span class="OtlTab3">            </span><span class="otlTagDef">[[:lower:]]</span><span class="OtlTab3">  malé písmeno</span>
<span class="OtlTab3">            </span><span class="otlTagDef">[[:digit:]]</span><span class="OtlTab3">  číslice</span>
<span class="OtlTab3">            </span><span class="otlTagDef">[[:xdigit:]]</span><span class="OtlTab3"> hexadecimální číslice</span>
<span class="OtlTab3">            </span><span class="otlTagDef">[[:alnum:]]</span><span class="OtlTab3">  písmeno či číslice</span>
<span class="OtlTab3">            </span><span class="otlTagDef">[[:space:]]</span><span class="OtlTab3">  znak, který se vytiskne jako mezera</span>
<span class="OtlTab3">            </span><span class="otlTagDef">[[:graph:]]</span><span class="OtlTab3">  znak, který má tisknutelnou podobu</span>
<span class="OtlTab3">            </span><span class="otlTagDef">[[:cntrl:]]</span><span class="OtlTab3">  řídicí znak</span>
<span class="OtlTab2">        - speciální (řídicí) znaky</span>
<span class="OtlTab3">            \a      alert (bell)</span>
<span class="OtlTab3">            \b      backspace</span>
<span class="OtlTab3">            \B      může se použít namísto \\ (čitelnější)</span>
<span class="OtlTab3">            \e      znak ESCape</span>
<span class="OtlTab3">            \n      nový řádek</span>
<span class="OtlTab3">            \r      návrat kurzoru</span>
<span class="OtlTab3">            \t      tab</span>
<span class="OtlTab3">            \u1234  znak se zadaným Unikódem</span>
<span class="OtlTab2">        - vybrané třídy znaků zapsané zkrácenou formou</span>
<span class="OtlTab3">            \d </span><span class="otlTagDef">[[:digit:]]</span>
<span class="OtlTab3">            \s </span><span class="otlTagDef">[[:space:]]</span>
<span class="OtlTab3">            \w </span><span class="otlTagRef">[[:alnum:]</span><span class="OtlTab3">_]  jako \d a _</span>
<span class="OtlTab3">            \D </span><span class="otlTagRef">[^[:digit:]</span><span class="OtlTab3">]</span>
<span class="OtlTab3">            \S </span><span class="otlTagRef">[^[:space:]</span><span class="OtlTab3">]</span>
<span class="OtlTab3">            \W </span><span class="otlTagRef">[^[:alnum:]</span><span class="OtlTab3">_] negace \W</span>

<span class="OtlTab1">    * Příklady regulárních výrazů</span>
<span class="OtlTab2">        - regulární výraz pro IPv4 adresu (nepřesný!)</span>
<span class="OtlTab2">        - znak \ zabraňuje spuštění &quot;příkazu&quot; v </span><span class="otlTagRef">[]</span>
<span class="OtlTab3">            &quot;(\</span><span class="otlTagRef">[0-9]</span><span class="OtlTab3">{1,3})\.(\</span><span class="otlTagRef">[0-9]</span><span class="OtlTab3">{1,3})\.(\</span><span class="otlTagRef">[0-9]</span><span class="OtlTab3">{1,3})\.(\</span><span class="otlTagRef">[0-9]</span><span class="OtlTab3">{1,3})&quot;</span>
<span class="OtlTab2">        - regulární výraz akceptující reálná čísla</span>
<span class="OtlTab2">        - zde je regulární výraz umístěný v {}, tudíž se neuvádí \ před </span><span class="otlTagRef">[]</span>
<span class="OtlTab3">            {</span><span class="otlTagRef">[-+]</span><span class="OtlTab3">?(</span><span class="otlTagRef">[0-9]</span><span class="OtlTab3">+\.?</span><span class="otlTagRef">[0-9]</span><span class="OtlTab3">*|\.</span><span class="otlTagRef">[0-9]</span><span class="OtlTab3">+)(</span><span class="otlTagRef">[eE][-+]</span><span class="OtlTab3">?</span><span class="otlTagRef">[0-8]</span><span class="OtlTab3">+)?}</span>

<span class="OtlTab1">    * Použití příkazu regexp</span>
<span class="OtlTab2">        - regexp reg_výraz řetězec</span>
<span class="OtlTab3">            - vrací 0/1 podle toho, zda se v řetězci</span>
<span class="OtlTab3">              nachází vzor z regulárního výrazu</span>
<span class="Tab2">        </span><span class="Tab">    </span>
<span class="OtlTab3">            % regexp {</span><span class="otlTagRef">[a-z]</span><span class="OtlTab3">} xyzzy</span>
<span class="OtlTab3">            1</span>
<span class="OtlTab3">            % regexp {</span><span class="otlTagRef">[a-z]</span><span class="OtlTab3">} 12345</span>
<span class="OtlTab3">            0</span>
<span class="Tab2">        </span><span class="Tab">    </span>
<span class="OtlTab2">        - využití tříd znaků v regulárních výrazech</span>
<span class="OtlTab3">            % regexp {</span><span class="otlTagDef">[[:alpha:]]</span><span class="OtlTab3">} xyzzy</span>
<span class="OtlTab3">            1</span>
<span class="OtlTab3">            % regexp {</span><span class="otlTagDef">[[:upper:]]</span><span class="OtlTab3">} xyzzy</span>
<span class="OtlTab3">            0</span>
<span class="OtlTab3">            % regexp {</span><span class="otlTagDef">[[:lower:]]</span><span class="OtlTab3">} xyzzy</span>
<span class="OtlTab3">            1</span>
<span class="OtlTab3">            % regexp {</span><span class="otlTagDef">[[:alpha:]]</span><span class="OtlTab3">} áýžřčš</span>
<span class="OtlTab3">            1</span>

<span class="OtlTab2">        - regexp volby reg_výraz řetězec</span>
<span class="OtlTab3">            - příkaz regexp lze zavolat s různými volbami</span>
<span class="OtlTab3">            - v některých případech je nutné volby ukončit pomocí --</span>
<span class="Tab2">        </span><span class="Tab">    </span>
<span class="OtlTab3">            % regexp -all {</span><span class="otlTagRef">[a-z]</span><span class="OtlTab3">} xyzzy</span>
<span class="OtlTab3">            5</span>
<span class="Tab2">        </span><span class="Tab">    </span>
<span class="OtlTab3">            % regexp -inline {</span><span class="otlTagRef">[a-z]</span><span class="OtlTab3">} xyzzy</span>
<span class="OtlTab3">            x</span>
<span class="Tab2">        </span><span class="Tab">    </span>
<span class="OtlTab3">            % regexp -inline -all {</span><span class="otlTagRef">[a-z]</span><span class="OtlTab3">} xyzzy</span>
<span class="OtlTab3">            x y z z y</span>
<span class="Tab2">        </span><span class="Tab">    </span>
<span class="OtlTab2">        - regexp reg_výraz řetězec proměnná</span>
<span class="OtlTab3">            % regexp {</span><span class="otlTagRef">[a-z]</span><span class="OtlTab3">} xyzzy vysledek</span>

<span class="OtlTab2">        - regexp reg_výraz řetězec proměnná prom1 ... promN</span>
<span class="OtlTab3">            set str 66.70.7.154</span>
<span class="OtlTab3">            regexp &quot;(\</span><span class="otlTagRef">[0-9]</span><span class="OtlTab3">{1,3})\.(\</span><span class="otlTagRef">[0-9]</span><span class="OtlTab3">{1,3})\.(\</span><span class="otlTagRef">[0-9]</span><span class="OtlTab3">{1,3})\.(\</span><span class="otlTagRef">[0-9]</span><span class="OtlTab3">{1,3})&quot; $str all first second third fourth</span>
<span class="OtlTab3">            puts &quot;$all \n $first \n $second \n $third \n $fourth \n&quot;</span>

<span class="OtlTab2">        - regexp a regsub</span>
<span class="OtlTab3">            set sample &quot;Where there is a will, There is a way.&quot;</span>

<span class="OtlTab3">            #</span>
<span class="OtlTab3">            # Match the first substring with lowercase letters only</span>
<span class="OtlTab3">            #</span>
<span class="OtlTab3">            set result </span><span class="otlTagRef">[regexp {[a-z]</span><span class="OtlTab3">+} $sample match]</span>
<span class="OtlTab3">            puts &quot;Result: $result match: $match&quot;</span>

<span class="OtlTab3">            #</span>
<span class="OtlTab3">            # Match the first two words, the first one allows uppercase</span>
<span class="OtlTab3">            set result </span><span class="otlTagRef">[regexp {([A-Za-z]</span><span class="OtlTab3">+) +(</span><span class="otlTagRef">[a-z]</span><span class="OtlTab3">+)} $sample match sub1 sub2 ]</span>
<span class="OtlTab3">            puts &quot;Result: $result Match: $match 1: $sub1 2: $sub2&quot;</span>

<span class="OtlTab3">            #</span>
<span class="OtlTab3">            # Replace a word</span>
<span class="OtlTab3">            #</span>
<span class="OtlTab3">            regsub &quot;way&quot; $sample &quot;lawsuit&quot; sample2</span>
<span class="OtlTab3">            puts &quot;New: $sample2&quot;</span>

<span class="OtlTab3">            #</span>
<span class="OtlTab3">            # Use the -all option to count the number of &quot;words&quot;</span>
<span class="OtlTab3">            #</span>
<span class="OtlTab3">            puts &quot;Number of words: </span><span class="otlTagRef">[regexp -all {[^ ]</span><span class="OtlTab3">+} $sample]&quot;</span>
<span class="OtlTab0">_______________________________________________________________</span>










<span class="OtlTab0">=================== 6. Práce se sockety     ===================</span>

<span class="OtlTab0">* Socket</span>
<span class="OtlTab1">    - vytvořený operačním systémem při nazávání připojení</span>
<span class="OtlTab1">    - procesy spolu mohou komunikovat stylem</span>
<span class="OtlTab2">        - peer to peer</span>
<span class="OtlTab2">        - client - server</span>
<span class="OtlTab1">    - jeden server může obsluhovat více klientů</span>

<span class="OtlTab0">* Práce se sockety</span>
<span class="OtlTab1">    - jednoduchý echo server (typický příklad)</span>
<span class="OtlTab1">    - využívá následující příkazy</span>
<span class="OtlTab2">        socket</span>
<span class="OtlTab2">        fconfigure</span>
<span class="OtlTab2">        fileevent</span>
<span class="OtlTab2">        vwait</span>

<span class="OtlTab1">    - v TCK je obsluha řešená přes callback funkce</span>
<span class="OtlTab2">        % set sock </span><span class="otlTagRef">[socket -server callbackFunkce $port]</span>
<span class="OtlTab1">    - callBack funkce je zavolána při každém vytvoření připojení</span>

<span class="OtlTab1">    - aby to fungovalo korektně, musí se skript dostat do smyčky událostí</span>
<span class="OtlTab2">        - event loop</span>
<span class="OtlTab1">    - dále se (pro echo server) nastaví režim vyrovnávací paměti,</span>
<span class="OtlTab1">      aby se buffer vyprázdnil pro každou řádku (jinak by se echo mohlo</span>
<span class="OtlTab1">      poslat až na konci spojení nebo při přeplnění bufferu)</span>
<span class="OtlTab2">        % fconfigure $sock -buffering line</span>
<span class="Tab">    </span>
<span class="OtlTab1">    - registrace callback funkce zavolané po přijetí dat</span>
<span class="OtlTab2">        % fileevent $sock readable </span><span class="otlTagRef">[list callbackFunkce2 $sock]</span>
<span class="OtlTab2">        - list xxx yyy je pouzit pro konstrukci volani callback funkce</span>
<span class="OtlTab1">    - test na příznak konce souboru</span>
<span class="OtlTab2">        % eof $sock</span>
<span class="OtlTab1">    - načtení řádku se zachycením chyb</span>
<span class="OtlTab2">        % catch {gets file line}</span>


<span class="OtlTab0">_______________________________________________________________</span>










<span class="OtlTab0">=================== 7. Informace poskytované VM TCL ===========</span>

<span class="OtlTab0">Informace poskytované VM TCL</span>
<span class="OtlTab1">    * příkaz &quot;info&quot;</span>
<span class="OtlTab2">        - je vyhodnocován za běhu skriptu</span>

<span class="OtlTab1">    * informace o interpretru</span>
<span class="OtlTab2">        - lze získat jeho verzi</span>
<span class="OtlTab3">            info tclversion</span>
<span class="OtlTab3">            8.5</span>

<span class="OtlTab1">    * informace o proměnných</span>
<span class="OtlTab2">        - info exists promenna</span>
<span class="OtlTab3">            set a foo</span>
<span class="OtlTab3">            info exists a</span>
<span class="OtlTab3">            1</span>
<span class="OtlTab3">            info exists b</span>
<span class="OtlTab3">            0</span>

<span class="OtlTab1">    * globální proměnné</span>
<span class="OtlTab2">        - info globals</span>
<span class="OtlTab2">        - info globals glob_výraz</span>

<span class="OtlTab1">    * informace o příkazech</span>
<span class="OtlTab2">        - info commands</span>
<span class="OtlTab3">            ...........</span>
<span class="OtlTab2">        - info commands p*</span>
<span class="OtlTab3">            pwd pid proc package puts</span>
<span class="OtlTab2">        - info commands l*</span>
<span class="OtlTab3">            list lassign lrange lsearch lappend llength linsert lreplace</span>
<span class="OtlTab3">            lreverse lset lrepeat load lindex lsort</span>

<span class="OtlTab1">    * získání informací o procedurách</span>
<span class="OtlTab2">        - info proc procname</span>
<span class="OtlTab2">        - info args procname</span>
<span class="OtlTab2">        - info body procname</span>

<span class="OtlTab1">    * Demonstrační příklad</span>
<span class="OtlTab2">        - vytvoření testovací procedury</span>
<span class="OtlTab3">            proc plus{x y} {</span>
<span class="OtlTab3">                </span><span class="otlTagRef">[expr $x+$y]</span>
<span class="OtlTab3">            }</span>
<span class="OtlTab2">        - získání základních informací o proceduře</span>
<span class="OtlTab3">            % info proc plus</span>
<span class="OtlTab3">            plus</span>
<span class="OtlTab3">            % info args plus</span>
<span class="OtlTab3">            x y</span>
<span class="OtlTab3">            % info body plus</span>
<span class="OtlTab3">            </span><span class="otlTagRef">[expr $x+$y]</span>


<span class="OtlTab0">_______________________________________________________________</span>










<span class="OtlTab0">=================== 8. Trasování proměnných ===================</span>
<span class="OtlTab0">Trasování proměnných</span>
<span class="OtlTab1">    * příkaz &quot;trace&quot;</span>
<span class="OtlTab1">    * trace add variable proměnná událost callbackFunkce</span>
<span class="OtlTab2">        - událost: read write</span>
<span class="OtlTab1">    * trace info variable proměnná</span>
<span class="OtlTab1">    * trace remove variable proměnná událost callbackFunkce</span>
<span class="OtlTab1">    * trace variable ...</span>
<span class="OtlTab1">    * trace vdelete ...</span>
<span class="OtlTab1">    * trace vinfo proměnná</span>

<span class="OtlTab1">    * Demonstrační příklad</span>

<span class="OtlTab2">        - trasování zápisu do proměnné x</span>

<span class="OtlTab3">            trace add variable x write tisk_write_x</span>

<span class="OtlTab3">            proc tisk_write_x args {</span>
<span class="OtlTab3">                global x</span>
<span class="OtlTab3">                puts &quot;zapis hodnoty $x do promenne x&quot;</span>
<span class="OtlTab3">            }</span>

<span class="OtlTab2">        - zrušení trasování zápisu do proměnné x</span>

<span class="OtlTab3">            trace remove variable x write tisk_write_x</span>

<span class="OtlTab2">        - výpis všech argumentů předaných do trasovací funkce</span>

<span class="OtlTab3">            proc tisk_write_x args {</span>
<span class="OtlTab3">                #puts &quot;zapis hodnoty $x do promenne x&quot;</span>
<span class="OtlTab3">                foreach arg $args {</span>
<span class="OtlTab3">                    puts &quot;tisk_write_x: $arg&quot;</span>
<span class="OtlTab3">                }</span>
<span class="OtlTab3">            }</span>

<span class="OtlTab2">        - výpis všech callback funkcí navázaných na proměnnou</span>

<span class="OtlTab3">            trace info variable x</span>

<span class="OtlTab0">_______________________________________________________________</span>










<span class="OtlTab0">=================== 9. Trasování programu   ===================</span>
<span class="OtlTab0">Trasování programu</span>
<span class="OtlTab1">    * opět se používá příkaz &quot;trace&quot;</span>
<span class="OtlTab1">    * trace add execution ...</span>
<span class="OtlTab1">    * trace add command ...</span>
<span class="OtlTab1">    * Demonstrační příklad</span>
<span class="OtlTab2">        - trasování vstupu a ukončení procedury test_proc</span>
<span class="OtlTab3">            proc test_proc {x y} { return </span><span class="otlTagRef">[expr $x+$y]</span><span class="OtlTab3">}</span>
<span class="OtlTab3">            trace add execution test_proc enter test_proc_enter</span>
<span class="OtlTab3">            trace add execution test_proc leave test_proc_leave</span>

<span class="OtlTab3">            proc test_proc_enter args { puts &quot;test_proc enter&quot; }</span>
<span class="OtlTab3">            proc test_proc_leave args { puts &quot;test_proc leave&quot; }</span>

<span class="OtlTab3">            proc test_proc_enter args {</span>
<span class="OtlTab3">                foreach arg $args {</span>
<span class="OtlTab3">                    puts &quot;test_proc_enter: $arg&quot;</span>
<span class="OtlTab3">                }</span>
<span class="OtlTab3">            }</span>

<span class="OtlTab3">            proc test_proc_leave args {</span>
<span class="OtlTab3">                foreach arg $args {</span>
<span class="OtlTab3">                    puts &quot;test_proc_leave: $arg&quot;</span>
<span class="OtlTab3">                }</span>
<span class="OtlTab3">            }</span>

<span class="OtlTab3">            trace info execution test_proc</span>
<span class="OtlTab1">    * trace remove execution test_proc leave test_proc_leave</span>
<span class="OtlTab0">_______________________________________________________________</span>










<span class="OtlTab0">=================== 10. Vytváření procesů   ===================</span>
<span class="OtlTab0">Spuštění nového procesu</span>
<span class="OtlTab1">    * exec</span>
<span class="OtlTab2">        - exec ?switches? arg ?arg ...?</span>
<span class="OtlTab2">          &lt;&lt; value</span>
<span class="OtlTab2">            přesměrování hodnoty na standardní vstup</span>
<span class="OtlTab2">          &gt; filename</span>
<span class="OtlTab2">            přesměrování standardního výstupu</span>
<span class="OtlTab2">          &gt;&gt; filename</span>
<span class="OtlTab2">            přesměrování standardního výstupu, připojení na konec souboru</span>
<span class="OtlTab2">          2&gt; filename</span>
<span class="OtlTab2">            přesměrování chybového výstupu</span>
<span class="OtlTab2">          2&gt;&gt; filename</span>
<span class="OtlTab2">            přesměrování chybového výstupu, připojení na konec souboru</span>
<span class="OtlTab2">        - exec ?switches? arg ?arg ...? &amp;</span>
<span class="OtlTab2">          spuštění úlohy na pozadí</span>



<span class="OtlTab0">Named pipes</span>

<span class="OtlTab1">    * Jedna z možností vytvoření komunikačního kanálu mezi procesy</span>
<span class="OtlTab2">        - výhoda: práce s named pipes stejná jako u souborů</span>
<span class="OtlTab2">        - nevýhoda: jen na některých OS, omezení při vzdálené komunikaci</span>

<span class="OtlTab1">    * Vytvoření v shellu</span>
<span class="OtlTab2">        $ mkfifo foo</span>

<span class="OtlTab1">    * Skript, který reaguje na každý zápis do roury</span>
<span class="OtlTab2">        set fifo </span><span class="otlTagRef">[open &quot;foo&quot; {RDWR NONBLOCK}]</span>
<span class="OtlTab2">        fconfigure $fifo -blocking 1</span>
<span class="OtlTab2">        proc read_fifo {} {</span>
<span class="OtlTab2">            global fifo</span>
<span class="OtlTab2">            gets $fifo x</span>
<span class="OtlTab2">            puts &quot;x is $x&quot;</span>
<span class="OtlTab2">        }</span>
<span class="OtlTab2">        fileevent $fifo readable read_fifo</span>

<span class="OtlTab1">    * Otestování funkčnosti</span>
<span class="OtlTab2">        $ echo &quot;qwerty&quot; &gt; foo</span>

<span class="OtlTab0">_______________________________________________________________</span>










<span class="OtlTab0">=================== 11. Multithreading      ===================</span>
<span class="OtlTab0">Multithreading</span>
<span class="OtlTab1">    * Import balíčku s podporou multithreadingu</span>
<span class="OtlTab2">        package require Thread</span>
<span class="OtlTab1">    * Příkazy v balíčku Thread</span>
<span class="OtlTab2">        thread::create ?skript?</span>
<span class="OtlTab3">            - vrací identifikátor nového vlákna</span>

<span class="OtlTab2">        thread::wait</span>
<span class="OtlTab3">            - vstup vlákna do smyčky událostí</span>
<span class="OtlTab3">            - používáno při thread:create se zadaným skriptem!</span>
<span class="OtlTab3">            - musí být až na konci skriptu</span>
<span class="OtlTab3">            - jen tak lze vláknu poslat nový skript pomocí thread:sent</span>

<span class="OtlTab2">        thread::send id ?skript?</span>
<span class="OtlTab3">            - při -async se nečeká na dokončení skriptu</span>

<span class="OtlTab2">        thread::send id ?skript? proměnná_s_výsledkem</span>
<span class="OtlTab3">            - lze specifikovat jméno proměnné pro uložení výsledku</span>

<span class="OtlTab2">        thread::broadcast id ?skript?</span>
<span class="OtlTab3">            - pošle skript do všech vláken, nečeká na dokončení</span>

<span class="OtlTab2">        thread::join id</span>
<span class="OtlTab3">            - čeká na dokončení vlákna id a vrátí jeho výsledek</span>

<span class="OtlTab1">    * Demonstrační příklad</span>
<span class="OtlTab2">        - použití thread::create a thread:send</span>
<span class="OtlTab3">            set t1 </span><span class="otlTagRef">[thread::create]</span>
<span class="OtlTab3">            set t2 </span><span class="otlTagRef">[thread::create]</span><span class="OtlTab3"> </span>
<span class="OtlTab3">            thread::send -async $t1 &quot;set a 1&quot; result</span>
<span class="OtlTab3">            thread::send -async $t2 &quot;set b 2&quot; result </span>
<span class="OtlTab3">            # čekání na dokončení obou vláken</span>
<span class="OtlTab3">            # není zaručeno pořadí dokončení</span>
<span class="OtlTab3">            for {set i 0} {$i &lt; 2} {incr i} {</span>
<span class="OtlTab3">               vwait result</span>
<span class="OtlTab3">            }</span>

<span class="OtlTab1">    * Mutexy (synchronizační mechanismus)</span>
<span class="OtlTab2">        thread::mutex create</span>
<span class="OtlTab2">        thread::mutex destroy mutex</span>
<span class="OtlTab2">        thread::mutex lock mutex</span>
<span class="OtlTab2">        thread::mutex unlock mutex</span>

<span class="OtlTab0">_______________________________________________________________</span>










<span class="OtlTab0">=================== 12. Jmenné prostory     ===================</span>
<span class="OtlTab0">Jmenné prostory</span>
<span class="OtlTab1">    * Jeden ze způsobů organizace zdrojových kódů</span>
<span class="OtlTab2">        - zmenšení počtu globálních proměnných</span>
<span class="OtlTab2">        - zmenšení počtu globálních procedur</span>
<span class="OtlTab3">            -&gt; menší pravděpodobnost konfliktu jmen (např. přepis globální proměnné)</span>

<span class="OtlTab1">    * Identifikátor jmenného prostoru se zapisuje před proceduru/proměnnou</span>
<span class="OtlTab2">        $jmenný_prostor::proměnná</span>
<span class="OtlTab2">        jmenný_prostor::procedura()</span>

<span class="OtlTab1">    * Jmenné prostory lze uspořádat hierarchicky</span>
<span class="OtlTab2">        $jmenný_prostor::jmenný_prostor::proměnná</span>
<span class="OtlTab2">        jmenný_prostor::jmenný_prostor::procedura()</span>

<span class="OtlTab1">    * Globální jmenný prostor</span>
<span class="OtlTab2">        &quot;&quot; - prázdný řetězec</span>
<span class="OtlTab2">        :: - synonymum</span>

<span class="OtlTab1">    * Mnohé balíčky vytváří vlastní jmenný prostor</span>
<span class="OtlTab2">        - viz thread::create atd.</span>

<span class="OtlTab1">    * Vytvoření nového jmenného prostoru</span>
<span class="OtlTab2">        namespace eval Counter {</span>
<span class="OtlTab2">            namespace export increment_variable</span>
<span class="OtlTab2">            variable num 0</span>

<span class="OtlTab2">            proc increment_variable {} {</span>
<span class="OtlTab3">                  variable num</span>
<span class="OtlTab3">                  incr num</span>
<span class="OtlTab2">            }</span>
<span class="OtlTab2">        }</span>

<span class="OtlTab2">        namespace eval ::tcl::clock \</span>
<span class="OtlTab3">            </span><span class="otlTagRef">[list variable LibDir [file dirname [info script]</span><span class="OtlTab3">]]</span>

<span class="OtlTab3">            namespace eval ::tcl::clock {</span>

<span class="OtlTab3">            # Export the subcommands</span>

<span class="OtlTab3">            namespace export format</span>
<span class="OtlTab3">            namespace export clicks</span>
<span class="OtlTab3">            namespace export microseconds</span>
<span class="OtlTab3">            namespace export milliseconds</span>
<span class="OtlTab3">            namespace export scan</span>
<span class="OtlTab3">            namespace export seconds</span>
<span class="OtlTab3">            namespace export add</span>

<span class="OtlTab1">    * Přístup k procedurám a proměnným ve jmenném prostoru</span>
<span class="OtlTab2">        Counter::bump 5</span>
<span class="OtlTab2">        Counter::Reset</span>
<span class="OtlTab2">        puts $Counter::num</span>

<span class="OtlTab0">_______________________________________________________________</span>











<span class="OtlTab0">===================== 13. Objektové rozšíření TCL =============</span>

<span class="OtlTab1">    * incr Tcl</span>
<span class="OtlTab2">        Několik skupin rozšíření</span>
<span class="OtlTab2">        Podpora pro OOP</span>
<span class="OtlTab2">        Příkazy</span>
<span class="OtlTab3">            itcl::body</span>
<span class="OtlTab3">            itcl::class</span>
<span class="OtlTab3">            itcl::code</span>
<span class="OtlTab3">            itcl::configbody</span>
<span class="OtlTab3">            itcl::delete</span>
<span class="OtlTab3">            itcl::ensemble</span>
<span class="OtlTab3">            itcl::find</span>
<span class="OtlTab3">            itcl::is</span>
<span class="OtlTab3">            itcl::local</span>
<span class="OtlTab3">            itcl::scope</span>
<span class="OtlTab2">        Nebylo zapotřebí měnit vlastní intepreteter TCL</span>

<span class="OtlTab0">_______________________________________________________________</span>













<span class="OtlTab0">===================== 14. Knihovna Tcllib =============</span>

<span class="OtlTab1">    * Kódování a dekódování, zpracování různých formátů souborů</span>
<span class="OtlTab1">    * Komunikační protokoly</span>
<span class="OtlTab1">    * Pokročilejší matematické operace</span>

<span class="OtlTab1">    * How to start with tcllib</span>
<span class="OtlTab2">        <a href="https://wiki.tcl.tk/1773">https://wiki.tcl.tk/1773</a></span>

<span class="OtlTab1">    * base64</span>
<span class="OtlTab2">        slouží ke kódování textových i binárních dat do řetězce</span>
<span class="OtlTab2">        obsahuje pouze 64 tisknutelných znaků kódu ASCII (viz RFC 1341)</span>
<span class="OtlTab2">        je možná i zpětná konverze řetězce uloženého v tomto kódování na binární data</span>
<span class="OtlTab2">        tento modul je možné využít například při zpracování e-mailových zpráv</span>

<span class="otlTextLeader">        |</span> package require base64
<span class="otlTextLeader">        |</span> base64::encode parametry data

<span class="OtlTab1">    * uuencode</span>
<span class="OtlTab2">        v mnohém podobný předchozímu modulu</span>
<span class="OtlTab2">        i zde se převádí binární data na textovou podobu</span>
<span class="OtlTab2">        zde však metodou, která je kompatibilní s utilitami uuencode a uudecode</span>

<span class="otlTextLeader">        |</span> package require uuencode
<span class="otlTextLeader">        |</span> uuencode::encode
<span class="otlTextLeader">        |</span> uuencode::decode

<span class="OtlTab1">    * csv</span>
<span class="OtlTab2">        slouží k práci se soubory uloženými ve formátu CSV</span>
<span class="OtlTab3">            Comma Separated Values</span>
<span class="OtlTab2">        v tomto formátu se pro účely přenosu ukládají tabulky z databází</span>
<span class="OtlTab2">        ale i údaje z tabulkových procesorů</span>
<span class="OtlTab2">        Modul csv nabízí použití jak standardního CSV formátu, tak i formátu používaného Microsoftími produkty</span>

<span class="OtlTab1">    * asn</span>
<span class="OtlTab2">        práce se strukturovanými daty uloženými v binární podobě podle standardu ASN.1</span>
<span class="OtlTab3">            Abstract Syntax Notation</span>
<span class="OtlTab2">        modul asn obsahuje metody pro získání hodnot základních i rozšířených datových typů:</span>
<span class="OtlTab3">            řetězců, celočíselných hodnot, pravdivostních hodnot apod.</span>

<span class="OtlTab1">    * html</span>
<span class="OtlTab2">        modul obsahuje značné množství metod, které slouží ke generování značek v HTML formátu</span>
<span class="OtlTab2">        místo programového vytváření HTML kódu je tak možný i deklarativní způsob zápisu stránky</span>
<span class="OtlTab2">        kromě metod tvořících značky pro základní formátování je možné vytvářet i tabulky a formuláře</span>

<span class="OtlTab1">    * htmlparse</span>
<span class="OtlTab2">        zpracovává řetězec, který by měl být ve formátu shodném s HTML</span>
<span class="OtlTab2">        v tomto řetězci jsou postupně hledány značky HTML a pro každou značku je zavolán uživatelem specifikovaný příkaz</span>
<span class="OtlTab2">        parser dále automaticky rozpozná (a z dalšího zpracování vynechá) úvodní deklaraci „DOCTYPE“</span>
<span class="OtlTab2">        a poznámky zapsané pomocí HTML značek.</span>

<span class="OtlTab1">    * inifile</span>
<span class="OtlTab2">        modul slouží k práci se soubory ini</span>
<span class="OtlTab2">        v těchto jednoduše strukturovaných souborech se nachází pojmenované sekce</span>
<span class="OtlTab3">            v každé sekci neomezený počet párů „jméno=hodnota“</span>
<span class="OtlTab2">        údaje je možné jak číst, tak i zapisovat.</span>

<span class="OtlTab1">    * md4</span>
<span class="OtlTab2">        modul slouží k vytvoření hash kódu řetězce či binárních dat podle normy MD4</span>
<span class="OtlTab2">        výsledkem je 128-bitový hash kód, který je možné získat jak v binárním, tak i hexadecimálním tvaru</span>
<span class="OtlTab3">            při použití tohoto modulu je zapotřebí dát pozor na to, že výstup v</span>
<span class="OtlTab3">            hexadecimálním tvaru je složen z řady 32 hexadecimálních číslic – to</span>
<span class="OtlTab3">            může způsobovat problémy některým utilitám, které očekávají, že vždy</span>
<span class="OtlTab3">            dvojice hexadecimálních číslic je od ostatních oddělena mezerou.</span>

<span class="OtlTab1">    * md5</span>
<span class="OtlTab2">        slouží k tvorbě hash kódů podle algoritmu popsaného v RFC 1321</span>
<span class="OtlTab2">        formát výstupu je stejný jako u předchozího modulu</span>
<span class="OtlTab3">            buď binární tvar nebo tvar hexadecimální.</span>

<span class="OtlTab1">    * md5crypt</span>
<span class="OtlTab2">        * je možné použít na vytvoření hash kódu původně nezakryptované­ho hesla.</span>

<span class="OtlTab1">    * sha1</span>
<span class="OtlTab2">        * slouží, podobně jako moduly md4 a md5, k vytvoření podpisu (hash kódu) řetězce či binárních dat</span>
<span class="OtlTab2">        * podle algoritmu SHA1</span>
<span class="OtlTab3">            Místo 128-bitového kódu je však použito 160 bitů a i samotný</span>
<span class="OtlTab3">            algoritmus je upraven tak, aby odolal některým kryptoanalytickým</span>
<span class="OtlTab3">            technikám.</span>

<span class="OtlTab1">    * crc16</span>
<span class="OtlTab2">        * poměrně jednoduchý modul sloužící k vytvoření šestnáctibitového kontrolního součtu (metodou CRC)</span>

<span class="OtlTab1">    * crc32 </span>
<span class="OtlTab2">        * lze použít pro výpočet dvaatřicetibitového kontrolního součtu (metodou CRC)</span>
<span class="OtlTab2">        * API tohoto modulu je odlišné od modulu crc16.</span>

<span class="OtlTab1">    * sum</span>
<span class="OtlTab2">        * slouží ke spočtení kontrolního součtu algoritmem kompatibilním s utilitou sum</span>
<span class="OtlTab3">            (viz man sum)</span>
<span class="OtlTab2">        * kromě řetězce je možné pracovat i se soubory.</span>

<span class="OtlTab1">    * des</span>
<span class="OtlTab2">        * umožňuje šifrovat a dešifrovat data pomocí dnes již postaršího šifrovacího standardu DES</span>
<span class="OtlTab3">            Data Encryption Standard.</span>

<span class="OtlTab1">    * rc4</span>
<span class="OtlTab2">        * implementace proudového šifrovacího algoritmu RC4.</span>

<span class="OtlTab1">    * jpeg</span>
<span class="OtlTab2">        * metody sloužící k získání dalších informací o uloženém obrázku</span>
<span class="OtlTab2">        * práce s formátem EXIF</span>

<span class="OtlTab1">    * png</span>
<span class="OtlTab2">        * slouží ke zpracování metainformací z rastrového formátu PNG</span>
<span class="OtlTab3">            Portable Network Graphics.</span>

<span class="OtlTab1">    * tar</span>
<span class="OtlTab2">        * je možné použít pro práci se soubory (a k nim příslušejícími informacemi) uloženými v tarballech.</span>



<span class="OtlTab0">===================== 15. Komunikační protokoly =======================</span>

<span class="OtlTab1">    * comm</span>
<span class="OtlTab2">        jednoduchý a přitom velmi mocný modul řešící komunikaci se vzdáleně běžící aplikací</span>
<span class="OtlTab2">        k dispozici je několik příkazů, které je možné aplikaci zaslat</span>
<span class="OtlTab2">        veškerá komunikace probíhá přes sockety</span>
<span class="OtlTab2">        je přitom možné komunikovat i mezi aplikacemi běžícími na různých operačních systémech</span>

<span class="OtlTab1">    * dns</span>
<span class="OtlTab2">        klient pro Internetovskou službu DNS</span>
<span class="OtlTab3">            Domain Name Service</span>
<span class="OtlTab2">        přenosy jsou implicitně uskutečňovány pomocí TCP</span>
<span class="OtlTab2">        je však možné (například pro dosažení vyšší rychlosti) použít i UDP, ovšem za podpory knihovny TclUDP.</span>

<span class="OtlTab1">    * tcllib_ip</span>
<span class="OtlTab2">        několik příkazů pracujících s IP adresami typu IPv4 i IPv6</span>

<span class="OtlTab1">    * ftp</span>
<span class="OtlTab2">        příkazy, pomocí nichž je možné vystupovat jako klient při komunikaci pomocí protokolu pro přenos souborů</span>
<span class="OtlTab3">            FTP – File Transfer Protocol</span>

<span class="OtlTab1">    * ftpd</span>
<span class="OtlTab2">        serverová část řešící komunikaci pomocí protokolu FTP</span>

<span class="OtlTab1">    * irc</span>
<span class="OtlTab2">        příkazy pro komunikaci pomocí protokolu IRC</span>
<span class="OtlTab3">            Internet Relay Chat</span>

<span class="OtlTab1">    * ldap</span>
<span class="OtlTab2">        klientská část příkazů pro komunikaci se servery pomocí protokolu LDAP</span>
<span class="OtlTab2">        většinou se jedná o získávání informací o osobách či rolích uložených dle organizační struktury nějaké organizace</span>

<span class="OtlTab1">    * nntp</span>
<span class="OtlTab2">        klientská část příkazů umožňujících práci s protokolem NNTP</span>

<span class="OtlTab1">    * pop3</span>
<span class="OtlTab2">        klientská část příkazů umožňujících práci s protokolem POP3</span>
<span class="OtlTab2">        používá se například při vytváření specializovaných e-mailových klientů</span>
<span class="OtlTab2">        v jednodušších programech, které pouze vylistují hlavičky zpráv.</span>

<span class="OtlTab1">    * pop3d</span>
<span class="OtlTab2">        Serverová část příkazů umožňujících práci s protokolem POP3.</span>

<span class="OtlTab1">    * smtp</span>
<span class="OtlTab2">        Klientská část příkazů umožňujících práci s protokolem SMTP</span>
<span class="OtlTab3">            Simple Mail Transfer Protocol</span>
<span class="OtlTab2">        Vhodné například při zasílání zpráv o chybách aplikace na e-mail jejího správce.</span>

<span class="OtlTab1">    * smtpd</span>
<span class="OtlTab2">        Serverová část příkazů umožňujících práci s protokolem SMTP.</span>




<span class="OtlTab0">===================== 16. Matematické funkce a operace =================</span>

<span class="OtlTab1">    * math::bigfloat</span>
<span class="OtlTab2">        práce s hodnotami uloženými ve formátu pohyblivé řádové čárky o (teoreticky) libovolné přesnosti a rozsahu</span>

<span class="OtlTab1">    * math::bignum</span>
<span class="OtlTab2">        práce s celočíselnými hodnotami o (teoreticky) libovolném rozsahu</span>

<span class="OtlTab1">    * math::fourier</span>
<span class="OtlTab2">        diskrétní Fourierova transformace (DFT) a rychlá Fourierova transformace (FFT) – používá se například při zpracování zvuku nebo obrazu</span>

<span class="OtlTab1">    * math::statistics</span>
<span class="OtlTab2">        různé statistické funkce a metody</span>

<span class="OtlTab1">    * math::linearalgebra</span>
<span class="OtlTab2">        lineární algebra (resp. její základ)</span>

<span class="OtlTab1">    * math::geometry</span>
<span class="OtlTab2">        vybrané operace řešící například vzdálenost bodu od úsečky, délku polyčáry apod.</span>

<span class="OtlTab1">    * math::interpolate</span>
<span class="OtlTab2">        různé metody interpolace (lineární, Lagrangeova, spline funkce …)</span>

<span class="OtlTab1">    * math::complex­numbers</span>
<span class="OtlTab2">        práce v komplexní rovině (včetně komplexních operátorů a funkcí)</span>

<span class="OtlTab1">    * math::calculus</span>
<span class="OtlTab2">        výpočet hodnot určitých integrálů různými metodami</span>

</pre>
</body>
</html>
<!-- vim: set foldmethod=manual : -->
